/**
 * 补全事件和人物数据中描述太简单的条目
 */

const fs = require('fs')
const path = require('path')

const dataDir = path.join(__dirname, '../../frontend/public/data')
const eventsPath = path.join(dataDir, 'events.json')
const personsPath = path.join(dataDir, 'persons.json')

const events = JSON.parse(fs.readFileSync(eventsPath, 'utf-8'))
const persons = JSON.parse(fs.readFileSync(personsPath, 'utf-8'))

// 事件描述补全映射
const eventEnrichments = {
  1: "传说中，大禹领导人民治理洪水，三过家门而不入，最终成功治水，被推举为部落联盟首领。大禹治水是中国古代重要的历史传说，体现了先民与自然灾害作斗争的伟大精神，也为大禹后来建立夏朝奠定了基础。",
  2: "商汤起兵推翻夏朝，建立商朝，标志着中国历史上第一次王朝更替。商汤是商族部落的首领，他重用贤臣伊尹，联合各方力量，在鸣条之战中击败夏桀，结束了夏朝的统治，开创了商朝五百多年的基业。",
  3: "周武王联合诸侯，在牧野之战中击败商纣王，建立周朝。这是中国历史上著名的以少胜多的战役，周武王继承父亲周文王的遗志，率领联军讨伐暴君商纣王，结束了商朝的统治，建立了延续八百年的周朝。",
  4: "春秋时期，齐桓公、晋文公、楚庄王、吴王阖闾、越王勾践等先后称霸，形成五霸争雄的局面。春秋五霸是春秋时期诸侯争霸的典型代表，他们通过改革内政、发展军事、联合诸侯等方式，先后成为中原地区的霸主，对春秋时期的历史发展产生了重要影响。",
  5: "商鞅在秦国推行变法，废井田、开阡陌，实行军功爵制，使秦国迅速强大。商鞅变法是战国时期最彻底的变法之一，通过废除旧制度、建立新制度，使秦国从一个边陲小国发展成为战国七雄中最强大的国家，为后来统一六国奠定了基础。",
  7: "秦始皇为统一思想，下令焚烧除医药、占卜、种树之外的书籍，坑杀儒生，对中国文化造成重大损失。焚书坑儒是秦始皇统一思想的重要措施，虽然在一定程度上达到了统一思想的目的，但也对中国古代文化造成了不可挽回的损失，成为后世批评秦始皇的重要依据。",
  8: "中国历史上第一次大规模的农民起义，虽然失败，但动摇了秦朝的统治基础。陈胜、吴广在大泽乡起义，揭开了反秦斗争的序幕，虽然起义最终失败，但沉重打击了秦朝的统治，为后来刘邦、项羽推翻秦朝奠定了基础。",
  9: "刘邦和项羽为争夺天下而进行的战争，最终刘邦获胜，建立汉朝。楚汉之争是秦末农民起义后，刘邦和项羽为争夺统治权而进行的长期战争，经过四年多的激烈战斗，最终刘邦在垓下之战中击败项羽，建立了延续四百多年的汉朝。",
  11: "张骞两次出使西域，开辟了丝绸之路，促进了东西方文化交流。张骞出使西域是中国历史上重要的外交事件，他克服重重困难，两次出使西域，不仅开辟了连接东西方的丝绸之路，还促进了中国与中亚、西亚等地的经济文化交流，对世界历史产生了深远影响。",
  12: "三国时期，孙权和刘备联军在赤壁大败曹操，奠定了三国鼎立的基础。赤壁之战是中国历史上著名的以少胜多的战役，孙刘联军在周瑜、诸葛亮的指挥下，利用火攻战术大败曹操的数十万大军，阻止了曹操统一中国的步伐，为三国鼎立局面的形成奠定了基础。",
  13: "隋炀帝下令开凿大运河，连接南北，促进了经济文化交流，但也加重了人民负担。隋炀帝开凿大运河是中国古代重要的水利工程，大运河连接了黄河、长江等主要水系，促进了南北经济文化交流，但工程浩大，耗费了大量人力物力，加重了人民负担，成为隋朝灭亡的重要原因之一。",
  14: "唐太宗李世民在位期间，政治清明，经济繁荣，文化昌盛，史称贞观之治，为唐朝的强盛奠定了基础。贞观之治是唐朝的鼎盛时期，唐太宗励精图治，任用贤臣，虚心纳谏，使唐朝政治清明，经济繁荣，文化昌盛，成为中国古代历史上著名的治世之一。",
  15: "安禄山、史思明发动的叛乱，持续八年，使唐朝由盛转衰。安史之乱是唐朝历史上最严重的叛乱，持续八年之久，虽然最终被平定，但严重削弱了唐朝的国力，使唐朝由盛转衰，从此进入藩镇割据、宦官专权的衰落时期。",
  16: "公元960年，赵匡胤发动陈桥兵变，建立宋朝，定都开封，结束了五代十国的分裂局面。宋太祖赵匡胤通过陈桥兵变夺取后周政权，建立了宋朝，结束了五代十国长期分裂割据的局面，开创了宋朝三百多年的基业，使中国重新实现了统一。",
  17: "宋神宗时期，王安石推行新法，试图富国强兵，但因保守派反对而失败。王安石变法是北宋中期重要的改革运动，通过推行青苗法、免役法、保甲法等一系列新法，试图富国强兵，但因遭到保守派的强烈反对，最终失败，但变法的一些措施对后世产生了重要影响。",
  18: "成吉思汗统一蒙古各部，建立大蒙古国，为元朝的建立奠定了基础。成吉思汗统一蒙古各部，建立了强大的大蒙古国，通过不断的对外扩张，建立了横跨欧亚的庞大帝国，为后来忽必烈建立元朝、统一中国奠定了基础。",
  19: "明成祖时期，郑和七次下西洋，最远到达非洲东海岸，促进了中外文化交流。郑和下西洋是中国古代规模最大的海上远航活动，郑和率领庞大的船队七次下西洋，到达东南亚、南亚、西亚、非洲等地，促进了中国与这些地区的经济文化交流，展示了明朝的强盛国力。",
  20: "1840年，英国发动鸦片战争，中国战败，被迫签订《南京条约》，开始沦为半殖民地半封建社会。鸦片战争是中国近代史的开端，中国在战争中失败，被迫签订《南京条约》，割让香港，开放通商口岸，赔款等，标志着中国开始沦为半殖民地半封建社会。",
  23: "官渡之战是东汉末年曹操与袁绍在官渡地区展开的决战，曹操以少胜多奠定北方统一基础。官渡之战是东汉末年重要的战役，曹操以少胜多，大败袁绍，奠定了统一北方的基础，是曹操统一北方的关键战役，也是中国历史上著名的以少胜多的战役之一。",
  24: "淝水之战，是公元383年东晋与前秦之间发生在淝水一带的战争，东晋以少胜多击败前秦，影响深远。淝水之战是中国历史上著名的以少胜多的战役，东晋在谢安、谢玄等人的指挥下，以少胜多，大败前秦苻坚的百万大军，阻止了前秦统一中国的步伐，使东晋得以延续。",
  25: "1894年爆发的甲午中日战争以清政府战败告终，对中国近代历史进程产生重大影响。甲午中日战争是中国近代史上的重要战争，中国在战争中失败，被迫签订《马关条约》，割让台湾、澎湖列岛，赔款巨额白银，使中国的半殖民地化程度进一步加深，也激发了中国人民的救亡图存意识。",
  26: "1898年的戊戌变法是晚清的一次改革尝试，主张变革旧制以图自强。戊戌变法是清末重要的改革运动，以康有为、梁启超为代表的维新派主张学习西方，变法图强，但因遭到以慈禧太后为首的保守派的反对，变法仅持续103天就失败了，但变法的一些思想对后世产生了重要影响。",
  27: "1911年的辛亥革命推翻清王朝统治，推动中国政治体制发生重大变化。辛亥革命是中国近代史上重要的革命，它推翻了延续两千多年的封建帝制，建立了中华民国，使中国政治体制发生了根本性的变化，标志着中国进入了民主共和的新时代。",
  28: "1912年中华民国建立，标志中国政治形态进入新的历史阶段。中华民国的建立标志着中国结束了延续两千多年的封建帝制，进入了民主共和的新时代，虽然民国建立后经历了军阀混战、抗日战争等困难，但它为中国政治现代化奠定了基础。",
  29: "1919年爆发的五四运动推动新文化运动发展，并对中国近现代思想与社会变革产生重要影响。五四运动是中国近代史上重要的思想文化运动，它高举民主与科学的旗帜，反对封建思想，推动了中国思想文化的现代化，也为中国共产党的成立奠定了思想基础。",
  30: "1937年抗日战争进入全面抗战阶段，中国社会与国家命运面临严峻考验。全面抗战爆发后，中国人民进行了艰苦卓绝的八年抗战，付出了巨大的牺牲，最终取得了抗日战争的胜利，为世界反法西斯战争的胜利作出了重要贡献。",
  31: "1945年中国人民抗日战争取得胜利，世界反法西斯战争走向胜利。抗日战争的胜利是中国人民经过八年艰苦抗战取得的伟大胜利，它结束了日本对中国的侵略，也为世界反法西斯战争的胜利作出了重要贡献，标志着中国人民站起来了。",
  32: "1949年中华人民共和国成立，开启中国历史发展的新阶段。中华人民共和国的成立标志着中国人民经过长期斗争，终于取得了民族独立和人民解放，开启了中华民族伟大复兴的新征程，是中国历史上具有划时代意义的重大事件。",
  33: "1950年抗美援朝战争爆发，中国人民志愿军入朝作战，对国际格局与国内发展产生重要影响。抗美援朝战争是中国人民志愿军为保家卫国、支援朝鲜人民而进行的正义战争，经过三年艰苦战斗，最终取得了胜利，打破了美军不可战胜的神话，提高了中国的国际地位。",
  34: "1978年后中国实行改革开放政策，推动经济社会快速发展与深刻变革。改革开放是中国历史上重要的转折点，它使中国从封闭走向开放，从计划经济走向市场经济，推动了中国经济社会的快速发展，使中国成为世界第二大经济体，实现了历史性的跨越。",
  35: "2001年中国加入世界贸易组织（WTO），对中国与世界经济的联系产生深远影响。中国加入WTO标志着中国进一步融入世界经济体系，为中国经济发展提供了新的机遇，也使中国在世界经济中发挥了越来越重要的作用，推动了中国经济的持续快速发展。",
  43: "1915-1923年，新文化运动兴起，提倡民主与科学，反对封建思想，推动了中国思想文化的现代化。新文化运动是中国近代史上重要的思想文化运动，以陈独秀、胡适、鲁迅等为代表的知识分子高举民主与科学的旗帜，反对封建思想，提倡新文学，推动了中国思想文化的现代化，为五四运动的爆发奠定了思想基础。",
  44: "1926-1928年，国民革命军进行北伐，基本消灭了北洋军阀，统一了全国，但随后国共合作破裂。北伐战争是国民革命军为统一全国而进行的战争，经过两年多的战斗，基本消灭了北洋军阀，统一了全国，但随后国共合作破裂，中国进入了新的历史时期。",
  45: "1931年9月18日，日本关东军发动九一八事变，侵占中国东北，标志着日本侵华战争的开始。九一八事变是日本帝国主义侵华的开端，日本关东军突然袭击中国东北军，迅速占领了东北三省，使中国东北沦为日本的殖民地，也标志着中国人民抗日战争的开始。",
  48: "1946年，国共内战全面爆发，中国共产党领导的人民解放军经过三年艰苦作战，最终取得胜利。解放战争是中国共产党领导的人民解放军为推翻国民党统治、建立新中国而进行的战争，经过三年多的艰苦战斗，最终取得了胜利，为新中国的建立奠定了基础。",
  51: "1901年，八国联军侵华后，清政府与列强签订《辛丑条约》，中国完全沦为半殖民地半封建社会。辛丑条约的签订标志着中国完全沦为半殖民地半封建社会，清政府被迫向列强赔款巨额白银，允许列强在北京等地驻军，使中国的国家主权受到严重损害。",
  54: "1954年，第一届全国人民代表大会召开，通过了《中华人民共和国宪法》，确立了人民代表大会制度。第一届全国人民代表大会的召开标志着中国政治制度的重要发展，通过的宪法确立了人民代表大会制度，使中国政治制度更加完善，为中国的政治发展奠定了基础。"
}

// 人物传记补全映射（只列出需要补全的）
const personEnrichments = {
  30: "孔子（公元前551年—前479年），名丘，字仲尼，春秋时期鲁国人，中国古代思想家、政治家、教育家，儒家学派创始人，其思想主要见于《论语》。孔子是中国古代伟大的思想家和教育家，他创立了儒家学派，提出了\"仁\"、\"礼\"等核心思想，对中国古代思想文化产生了深远影响。他周游列国，传播自己的思想，虽然生前未能实现政治理想，但他的思想成为后世两千多年中国社会的主流思想。",
  46: "章邯（？—前205年），秦末将领，镇压陈胜吴广起义并与反秦诸侯作战，巨鹿之战后势衰，后归降并被封王。章邯是秦朝末年的重要将领，他率领秦军镇压了陈胜吴广起义，并在与反秦诸侯的战斗中多次获胜，但在巨鹿之战中被项羽击败，后归降项羽，被封为雍王，最终在楚汉之争中被刘邦击败。",
  47: "王离（？—前206年），秦将，在秦末战争中与章邯等率军作战，巨鹿之战相关人物之一。王离是秦朝名将王翦的孙子，在秦末战争中与章邯等率军镇压反秦起义，在巨鹿之战中被项羽击败，后被俘杀。王离作为秦朝名将之后，继承了家族的军事传统，但在秦末战争中未能挽救秦朝的命运。",
  48: "袁绍（？—202年），东汉末军阀，割据河北并与曹操争雄，官渡之战中败于曹操，此后势力转衰。袁绍是东汉末年的重要军阀，他出身名门，割据河北，实力强大，与曹操争夺北方霸权，但在官渡之战中被曹操击败，此后势力逐渐衰落，最终病逝。",
  49: "白起（？—前257年），战国秦国名将，长平之战中秦军主将之一，秦国扩张的重要军事人物。白起是战国时期秦国著名的军事将领，他指挥秦军多次取得重大胜利，在长平之战中击败赵军，坑杀赵军降卒四十万，为秦国的统一大业作出了重要贡献，但也因杀戮过重而受到后世批评。",
  50: "廉颇（前327年—前243年），战国赵国名将，长平之战前期赵军主将之一，赵国重要军事人物。廉颇是战国时期赵国著名的军事将领，他多次率军击败秦军，在长平之战前期担任赵军主将，但因赵王听信谗言，被撤换，导致赵军大败。",
  51: "赵括（？—前260年），战国赵国将领，长平之战中接替廉颇为主将，战败阵亡。赵括是战国时期赵国将领，在长平之战中接替廉颇担任主将，但他缺乏实战经验，只会纸上谈兵，最终被白起击败，赵军全军覆没，赵括也战死沙场。",
  52: "苻坚（338年—385年），十六国时期前秦君主，统一北方后南下伐晋，淝水之战失败导致前秦迅速衰落。苻坚是十六国时期前秦的君主，他统一了北方，建立了强大的前秦政权，但在淝水之战中被东晋击败，导致前秦迅速衰落，最终被后秦所灭。",
  53: "谢安（320年—385年），东晋政治家，淝水之战时主持朝政并推动战守决策，是东晋稳定的重要人物。谢安是东晋时期重要的政治家，他在淝水之战时主持朝政，运筹帷幄，最终使东晋以少胜多，击败前秦，为东晋的稳定和发展作出了重要贡献。",
  54: "谢玄（343年—388年），东晋将领，统率北府兵，在淝水之战中发挥关键作用。谢玄是东晋时期重要的军事将领，他统率北府兵，在淝水之战中发挥了关键作用，率领晋军击败前秦大军，为东晋的胜利作出了重要贡献。谢玄是谢安的侄子，他训练和统率的北府兵是东晋最精锐的军队，在淝水之战中发挥了决定性作用。",
  55: "康有为（1858年—1927年），清末思想家、政治家，维新派代表人物之一，参与推动戊戌变法。康有为是清末重要的思想家和政治家，他主张变法图强，与梁启超等一起推动戊戌变法，虽然变法失败，但他的思想对后世产生了重要影响。",
  56: "梁启超（1873年—1929年），清末民初思想家、学者、政论家，维新派重要人物，参与并宣传戊戌变法主张。梁启超是清末民初重要的思想家、学者和政论家，他参与并宣传戊戌变法，变法失败后流亡海外，继续宣传维新思想，对中国近代思想文化产生了重要影响。",
  57: "谭嗣同（1865年—1898年），维新派人士，\"戊戌六君子\"之一，因变法失败被杀。谭嗣同是清末维新派的重要人物，他积极参与戊戌变法，变法失败后拒绝逃亡，慷慨就义，成为\"戊戌六君子\"之一，他的牺牲精神激励了后来的革命者。",
  58: "光绪帝（1871年—1908年），清朝皇帝，在戊戌变法中支持维新改革，后变法失败被幽禁。光绪帝是清朝的皇帝，他在位期间支持维新改革，试图通过变法使国家富强，但因遭到以慈禧太后为首的保守派的反对，变法失败，光绪帝也被幽禁，最终在幽禁中去世。",
  59: "慈禧太后（1835年—1908年），清末重要政治人物，戊戌变法中发动政变，导致变法失败。慈禧太后是清末重要的政治人物，她实际掌握清朝政权数十年，在戊戌变法中发动政变，囚禁光绪帝，导致变法失败，使中国失去了改革的机会。",
  60: "江泽民（1926年—2022年），中国重要政治人物，20世纪末至21世纪初中国对外开放与改革进程的重要参与者之一。江泽民是中国共产党的优秀党员，他在担任党和国家领导人期间，推动了中国改革开放的深入发展，使中国经济持续快速发展，国际地位不断提高。",
  61: "朱镕基（1928年—），中国重要政治人物，参与并推动经济体制改革与对外开放相关工作。朱镕基是中国共产党的优秀党员，他在担任国务院总理期间，推动了中国经济体制改革的深入发展，使中国经济持续快速发展，为中国现代化建设作出了重要贡献。",
  63: "左宗棠（1812年11月10日—1885年9月5日），字季高，一字朴存，号湘上农人，湖南湘阴人，晚清政治家、军事家、民族英雄，洋务派代表人物之一，与曾国藩、李鸿章、张之洞并称\"晚清中兴四大名臣\"。左宗棠在镇压太平天国、收复新疆等重大历史事件中发挥了重要作用，他率军收复新疆，维护了国家统一，是晚清重要的政治家和军事家。",
  64: "张之洞（1837年9月2日—1909年10月4日），字孝达，号香涛，晚清名臣、洋务派代表人物，与曾国藩、李鸿章、左宗棠并称\"晚清中兴四大名臣\"。张之洞是晚清重要的政治家和改革家，他推动洋务运动，创办了许多近代企业，为中国近代化作出了重要贡献。",
  65: "袁世凯（1859年9月16日—1916年6月6日），字慰亭，号容庵，河南项城人，中国近代史上著名的政治、军事人物，北洋军阀领袖。袁世凯是清末民初重要的政治人物，他参与镇压义和团运动，在辛亥革命后成为中华民国临时大总统，但后来试图恢复帝制，最终失败。",
  66: "蔡锷（1882年12月18日—1916年11月8日），原名艮寅，字松坡，湖南邵阳人，近代军事家、革命家，护国运动的主要领导人之一。蔡锷是近代重要的军事家和革命家，他参与护国运动，反对袁世凯称帝，为维护民主共和作出了重要贡献。",
  67: "胡适（1891年12月17日—1962年2月24日），原名嗣穈，学名洪骍，字希疆，笔名胡适，字适之，安徽绩溪人，中国现代思想家、文学家、哲学家，新文化运动的重要代表人物之一。胡适是新文化运动的重要代表人物，他提倡白话文，推动文学革命，对中国现代思想文化产生了重要影响。",
  68: "张学良（1901年6月3日—2001年10月14日），字汉卿，号毅庵，辽宁海城人，中国近代著名爱国将领，西安事变的主要发动者之一。张学良是近代重要的爱国将领，他参与西安事变，促成了国共合作抗日，为抗日战争的胜利作出了重要贡献。",
  69: "杨虎城（1893年11月26日—1949年9月6日），原名虎臣，陕西蒲城人，中国近代著名爱国将领，西安事变的主要发动者之一。杨虎城是近代重要的爱国将领，他参与西安事变，促成了国共合作抗日，为抗日战争的胜利作出了重要贡献，但后来被国民党杀害。",
  70: "洪秀全（1814年1月1日—1864年6月1日），原名洪仁坤，广东花县人，太平天国运动的创始人和主要领导人。洪秀全是太平天国运动的创始人和主要领导人，他创立拜上帝教，发动太平天国运动，建立了太平天国政权，虽然最终失败，但沉重打击了清政府的统治。"
}

// 补全事件描述
let eventsUpdated = 0
events.forEach(event => {
  if (eventEnrichments[event.id]) {
    event.description = eventEnrichments[event.id]
    eventsUpdated++
  }
})

// 补全人物传记
let personsUpdated = 0
persons.forEach(person => {
  if (personEnrichments[person.id]) {
    person.biography = personEnrichments[person.id]
    personsUpdated++
  }
  
  // 为缺少生卒年份的人物补充
  if (person.id === 47 && !person.birthYear && !person.deathYear) {
    person.birthYear = null // 生年不详
    person.deathYear = -206 // 根据历史记载
  }
})

// 备份原文件
const eventsBackup = eventsPath + '.backup.' + Date.now()
const personsBackup = personsPath + '.backup.' + Date.now()
fs.copyFileSync(eventsPath, eventsBackup)
fs.copyFileSync(personsPath, personsBackup)
console.log(`已备份原文件：${eventsBackup}`)
console.log(`已备份原文件：${personsBackup}`)

// 保存更新后的数据
fs.writeFileSync(eventsPath, JSON.stringify(events, null, 2), 'utf-8')
fs.writeFileSync(personsPath, JSON.stringify(persons, null, 2), 'utf-8')

console.log(`\n补全完成：`)
console.log(`- 更新了 ${eventsUpdated} 个事件的描述`)
console.log(`- 更新了 ${personsUpdated} 个人物的传记`)

